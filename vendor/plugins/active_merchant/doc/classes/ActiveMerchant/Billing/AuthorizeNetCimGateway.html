<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: ActiveMerchant::Billing::AuthorizeNetCimGateway</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">ActiveMerchant::Billing::AuthorizeNetCimGateway</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/active_merchant/billing/gateways/authorize_net_cim_rb.html">
                lib/active_merchant/billing/gateways/authorize_net_cim.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="Gateway.html">
                Gateway
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h4>Custotmer Information Manager (CIM)</h4>
<p>
The Authorize.Net Customer Information Manager (CIM) is an optional
additional service that allows you to store sensitive payment information
on Authorize.Net&#8216;s servers, simplifying payments for returning
customers and recurring transactions. It can also help with Payment Card
Industry (PCI) Data Security Standard compliance, since customer data is no
longer stored locally.
</p>
<p>
To use the <a href="AuthorizeNetCimGateway.html">AuthorizeNetCimGateway</a>
CIM must be enabled for your account.
</p>
<p>
Information about CIM is available on the <a
href="http://www.authorize.net/solutions/merchantsolutions/merchantservices/cim/">Authorize.Net
website</a>. Information about the CIM API is available at the <a
href="http://developer.authorize.net/">Authorize.Net Integration Center</a>
</p>
<h4>Login and Password</h4>
<p>
The login and password are not the username and password you use to login
to the Authorize.Net Merchant Interface. Instead, you will use the API
Login ID as the login and Transaction Key as the password.
</p>
<h4>How to Get Your API Login ID and Transaction Key</h4>
<ol>
<li>Log into the Merchant Interface

</li>
<li>Select Settings from the Main Menu

</li>
<li>Click on API Login ID and Transaction Key in the Security section

</li>
<li>Type in the answer to the secret question configured on setup

</li>
<li>Click Submit

</li>
</ol>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000361">create_customer_payment_profile</a>&nbsp;&nbsp;
      <a href="#M000360">create_customer_profile</a>&nbsp;&nbsp;
      <a href="#M000372">create_customer_profile_transaction</a>&nbsp;&nbsp;
      <a href="#M000362">create_customer_shipping_address</a>&nbsp;&nbsp;
      <a href="#M000364">delete_customer_payment_profile</a>&nbsp;&nbsp;
      <a href="#M000363">delete_customer_profile</a>&nbsp;&nbsp;
      <a href="#M000365">delete_customer_shipping_address</a>&nbsp;&nbsp;
      <a href="#M000367">get_customer_payment_profile</a>&nbsp;&nbsp;
      <a href="#M000366">get_customer_profile</a>&nbsp;&nbsp;
      <a href="#M000368">get_customer_shipping_address</a>&nbsp;&nbsp;
      <a href="#M000359">new</a>&nbsp;&nbsp;
      <a href="#M000370">update_customer_payment_profile</a>&nbsp;&nbsp;
      <a href="#M000369">update_customer_profile</a>&nbsp;&nbsp;
      <a href="#M000371">update_customer_shipping_address</a>&nbsp;&nbsp;
      <a href="#M000373">validate_customer_payment_profile</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">AUTHORIZE_NET_CIM_NAMESPACE</td>
          <td>=</td>
          <td class="context-item-value">'AnetApi/xml/v1/schema/AnetApiSchema.xsd'</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">CIM_ACTIONS</td>
          <td>=</td>
          <td class="context-item-value">{         :create_customer_profile =&gt; 'createCustomerProfile',         :create_customer_payment_profile =&gt; 'createCustomerPaymentProfile',         :create_customer_shipping_address =&gt; 'createCustomerShippingAddress',         :get_customer_profile =&gt; 'getCustomerProfile',         :get_customer_payment_profile =&gt; 'getCustomerPaymentProfile',         :get_customer_shipping_address =&gt; 'getCustomerShippingAddress',         :delete_customer_profile =&gt; 'deleteCustomerProfile',         :delete_customer_payment_profile =&gt; 'deleteCustomerPaymentProfile',         :delete_customer_shipping_address =&gt; 'deleteCustomerShippingAddress',         :update_customer_profile =&gt; 'updateCustomerProfile',         :update_customer_payment_profile =&gt; 'updateCustomerPaymentProfile',         :update_customer_shipping_address =&gt; 'updateCustomerShippingAddress',         :create_customer_profile_transaction =&gt; 'createCustomerProfileTransaction',         :validate_customer_payment_profile =&gt; 'validateCustomerPaymentProfile'</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">CIM_TRANSACTION_TYPES</td>
          <td>=</td>
          <td class="context-item-value">{         :auth_capture =&gt; 'profileTransAuthCapture',         :auth_only =&gt; 'profileTransAuthOnly',         :capture_only =&gt; 'profileTransCaptureOnly'</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">CIM_VALIDATION_MODES</td>
          <td>=</td>
          <td class="context-item-value">{         :none =&gt; 'none',         :test =&gt; 'testMode',         :live =&gt; 'liveMode'</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">BANK_ACCOUNT_TYPES</td>
          <td>=</td>
          <td class="context-item-value">{         :checking =&gt; 'checking',         :savings =&gt; 'savings',         :business_checking =&gt; 'businessChecking'</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">ECHECK_TYPES</td>
          <td>=</td>
          <td class="context-item-value">{         :ccd =&gt; 'CCD',         :ppd =&gt; 'PPD'</td>
        </tr>
        </table>
      </div>
    </div>



      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000359" class="method-detail">
        <a name="M000359"></a>

        <div class="method-heading">
          <a href="#M000359" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a <a href="AuthorizeNetCimGateway.html#M000359">new</a> <a
href="AuthorizeNetCimGateway.html">AuthorizeNetCimGateway</a>
</p>
<p>
The gateway requires that a valid API Login ID and Transaction Key be
passed in the <tt>options</tt> hash.
</p>
<h4>Options</h4>
<ul>
<li><tt>:login</tt> &#8212; The Authorize.Net API Login ID (REQUIRED)

</li>
<li><tt>:password</tt> &#8212; The Authorize.Net Transaction Key. (REQUIRED)

</li>
<li><tt>:test</tt> &#8212; <tt>true</tt> or <tt>false</tt>. If true, perform
transactions against the test server. Otherwise, perform transactions
against the production server.

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000359-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000359-source">
<pre>
    <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net_cim.rb, line 88</span>
88:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">options</span> = {})
89:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:login</span>, <span class="ruby-identifier">:password</span>)
90:         <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">options</span>
91:         <span class="ruby-keyword kw">super</span>
92:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000361" class="method-detail">
        <a name="M000361"></a>

        <div class="method-heading">
          <a href="#M000361" class="method-signature">
          <span class="method-name">create_customer_payment_profile</span><span class="method-args">(options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a <a href="AuthorizeNetCimGateway.html#M000359">new</a> customer
payment profile for an existing customer profile.
</p>
<h4>Options</h4>
<ul>
<li><tt>:customer_profile_id</tt> &#8212; The Customer Profile ID of the
customer the payment profile will be added to. (REQUIRED)

</li>
<li><tt>:payment_profile</tt> &#8212; A hash containing the elements of the <a
href="AuthorizeNetCimGateway.html#M000359">new</a> payment profile
(REQUIRED)

</li>
</ul>
<h4>Payment Profile</h4>
<ul>
<li><tt>:payment</tt> &#8212; A hash containing information on payment. Either
:credit_card or :bank_account (REQUIRED)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000361-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000361-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net_cim.rb, line 120</span>
120:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_customer_payment_profile</span>(<span class="ruby-identifier">options</span>)
121:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:customer_profile_id</span>)
122:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:payment_profile</span>)
123:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:payment_profile</span>], <span class="ruby-identifier">:payment</span>)
124:         
125:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_request</span>(<span class="ruby-identifier">:create_customer_payment_profile</span>, <span class="ruby-identifier">options</span>)
126:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">:create_customer_payment_profile</span>, <span class="ruby-identifier">request</span>)
127:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000360" class="method-detail">
        <a name="M000360"></a>

        <div class="method-heading">
          <a href="#M000360" class="method-signature">
          <span class="method-name">create_customer_profile</span><span class="method-args">(options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a <a href="AuthorizeNetCimGateway.html#M000359">new</a> customer
profile along with any customer payment profiles and customer shipping
addresses for the customer profile.
</p>
<p>
Returns a <a href="Response.html">Response</a> with the Customer Profile ID
of the <a href="AuthorizeNetCimGateway.html#M000359">new</a> customer
profile in the authorization field. It is <b>CRITICAL</b> that you save
this ID. There is no way to retrieve this through the API. You will not be
able to create another Customer Profile with the same information.
</p>
<h4>Options</h4>
<p>
TODO
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000360-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000360-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net_cim.rb, line 104</span>
104:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_customer_profile</span>(<span class="ruby-identifier">options</span>)
105:         <span class="ruby-comment cmt"># TODO Add requires</span>
106:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_request</span>(<span class="ruby-identifier">:create_customer_profile</span>, <span class="ruby-identifier">options</span>)
107:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">:create_customer_profile</span>, <span class="ruby-identifier">request</span>)
108:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000372" class="method-detail">
        <a name="M000372"></a>

        <div class="method-heading">
          <a href="#M000372" class="method-signature">
          <span class="method-name">create_customer_profile_transaction</span><span class="method-args">(options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a <a href="AuthorizeNetCimGateway.html#M000359">new</a> payment
transaction from an existing customer profile
</p>
<p>
This is what is used to charge a customer whose information you have stored
in a Customer Profile.
</p>
<p>
Returns a <a href="Response.html">Response</a> object that contains the
result of the transaction in <tt>params[&#8216;direct_response&#8217;]</tt>
</p>
<h4>Options</h4>
<ul>
<li><tt>:transaction</tt> &#8212; A hash containing information on the
transaction that is being requested. (REQUIRED)

</li>
</ul>
<h4>Transaction</h4>
<ul>
<li><tt>:type</tt> &#8212; The type of transaction. Can be either
<tt>:auth_only</tt>, <tt>:capture_only</tt>, or <tt>:auth_capture</tt>.
(REQUIRED)

</li>
<li><tt>:amount</tt> &#8212; The amount for the tranaction. Formatted with a
decimal. For example &quot;4.95&quot; (REQUIRED)

</li>
<li><tt>:customer_profile_id</tt> &#8212; The Customer Profile ID of the
customer to use in this transaction. (REQUIRED)

</li>
<li><tt>:customer_payment_profile_id</tt> &#8212; The Customer Payment Profile
ID of the Customer Payment Profile to use in this transaction. (REQUIRED)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000372-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000372-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net_cim.rb, line 311</span>
311:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_customer_profile_transaction</span>(<span class="ruby-identifier">options</span>)
312:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:transaction</span>)
313:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:transaction</span>], <span class="ruby-identifier">:type</span>, <span class="ruby-identifier">:amount</span>, <span class="ruby-identifier">:customer_profile_id</span>, <span class="ruby-identifier">:customer_payment_profile_id</span>)
314: 
315:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_request</span>(<span class="ruby-identifier">:create_customer_profile_transaction</span>, <span class="ruby-identifier">options</span>)
316:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">:create_customer_profile_transaction</span>, <span class="ruby-identifier">request</span>)
317:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000362" class="method-detail">
        <a name="M000362"></a>

        <div class="method-heading">
          <a href="#M000362" class="method-signature">
          <span class="method-name">create_customer_shipping_address</span><span class="method-args">(options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a <a href="AuthorizeNetCimGateway.html#M000359">new</a> customer
shipping address for an existing customer profile.
</p>
<h4>Options</h4>
<ul>
<li><tt>:customer_profile_id</tt> &#8212; The Customer Profile ID of the
customer the payment profile will be added to. (REQUIRED)

</li>
<li><tt>:address</tt> &#8212; A hash containing the elements of the shipping
address (REQUIRED)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000362-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000362-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net_cim.rb, line 135</span>
135:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_customer_shipping_address</span>(<span class="ruby-identifier">options</span>)
136:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:customer_profile_id</span>)
137:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:address</span>)
138:         
139:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_request</span>(<span class="ruby-identifier">:create_customer_shipping_address</span>, <span class="ruby-identifier">options</span>)
140:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">:create_customer_shipping_address</span>, <span class="ruby-identifier">request</span>)
141:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000364" class="method-detail">
        <a name="M000364"></a>

        <div class="method-heading">
          <a href="#M000364" class="method-signature">
          <span class="method-name">delete_customer_payment_profile</span><span class="method-args">(options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Deletes a customer payment profile from an existing customer profile.
</p>
<h4>Options</h4>
<ul>
<li><tt>:customer_profile_id</tt> &#8212; The Customer Profile ID of the
customer with the payment profile to be deleted. (REQUIRED)

</li>
<li><tt>:customer_payment_profile_id</tt> &#8212; The Payment Profile ID of the
payment profile to be deleted. (REQUIRED)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000364-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000364-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net_cim.rb, line 161</span>
161:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_customer_payment_profile</span>(<span class="ruby-identifier">options</span>)
162:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:customer_profile_id</span>)
163:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:customer_payment_profile_id</span>)
164: 
165:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_request</span>(<span class="ruby-identifier">:delete_customer_payment_profile</span>, <span class="ruby-identifier">options</span>)
166:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">:delete_customer_payment_profile</span>, <span class="ruby-identifier">request</span>)
167:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000363" class="method-detail">
        <a name="M000363"></a>

        <div class="method-heading">
          <a href="#M000363" class="method-signature">
          <span class="method-name">delete_customer_profile</span><span class="method-args">(options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Deletes an existing customer profile along with all associated customer
payment profiles and customer shipping addresses.
</p>
<h4>Options</h4>
<ul>
<li><tt>:customer_profile_id</tt> &#8212; The Customer Profile ID of the
customer to be deleted. (REQUIRED)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000363-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000363-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net_cim.rb, line 148</span>
148:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_customer_profile</span>(<span class="ruby-identifier">options</span>)
149:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:customer_profile_id</span>)
150: 
151:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_request</span>(<span class="ruby-identifier">:delete_customer_profile</span>, <span class="ruby-identifier">options</span>)
152:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">:delete_customer_profile</span>, <span class="ruby-identifier">request</span>)
153:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000365" class="method-detail">
        <a name="M000365"></a>

        <div class="method-heading">
          <a href="#M000365" class="method-signature">
          <span class="method-name">delete_customer_shipping_address</span><span class="method-args">(options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Deletes a customer shipping address from an existing customer profile.
</p>
<h4>Options</h4>
<ul>
<li><tt>:customer_profile_id</tt> &#8212; The Customer Profile ID of the
customer with the payment profile to be deleted. (REQUIRED)

</li>
<li><tt>:customer_address_id</tt> &#8212; The Shipping Address ID of the
shipping address to be deleted. (REQUIRED)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000365-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000365-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net_cim.rb, line 175</span>
175:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_customer_shipping_address</span>(<span class="ruby-identifier">options</span>)
176:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:customer_profile_id</span>)
177:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:customer_address_id</span>)
178: 
179:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_request</span>(<span class="ruby-identifier">:delete_customer_shipping_address</span>, <span class="ruby-identifier">options</span>)
180:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">:delete_customer_shipping_address</span>, <span class="ruby-identifier">request</span>)
181:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000367" class="method-detail">
        <a name="M000367"></a>

        <div class="method-heading">
          <a href="#M000367" class="method-signature">
          <span class="method-name">get_customer_payment_profile</span><span class="method-args">(options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Retrieve a customer payment profile for an existing customer profile.
</p>
<p>
Returns a <a href="Response.html">Response</a> whose params hash contains
all the payment profile information. Sensitive information such as credit
card numbers will be masked.
</p>
<h4>Options</h4>
<ul>
<li><tt>:customer_profile_id</tt> &#8212; The Customer Profile ID of the
customer with the payment profile to be retrieved. (REQUIRED)

</li>
<li><tt>:customer_payment_profile_id</tt> &#8212; The Payment Profile ID of the
payment profile to be retrieved. (REQUIRED)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000367-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000367-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net_cim.rb, line 206</span>
206:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_customer_payment_profile</span>(<span class="ruby-identifier">options</span>)
207:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:customer_profile_id</span>)
208:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:customer_payment_profile_id</span>)
209: 
210:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_request</span>(<span class="ruby-identifier">:get_customer_payment_profile</span>, <span class="ruby-identifier">options</span>)
211:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">:get_customer_payment_profile</span>, <span class="ruby-identifier">request</span>)
212:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000366" class="method-detail">
        <a name="M000366"></a>

        <div class="method-heading">
          <a href="#M000366" class="method-signature">
          <span class="method-name">get_customer_profile</span><span class="method-args">(options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Retrieves an existing customer profile along with all the associated
customer payment profiles and customer shipping addresses.
</p>
<p>
Returns a <a href="Response.html">Response</a> whose params hash contains
all the profile information.
</p>
<h4>Options</h4>
<ul>
<li><tt>:customer_profile_id</tt> &#8212; The Customer Profile ID of the
customer to retrieve. (REQUIRED)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000366-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000366-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net_cim.rb, line 190</span>
190:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_customer_profile</span>(<span class="ruby-identifier">options</span>)
191:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:customer_profile_id</span>)
192: 
193:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_request</span>(<span class="ruby-identifier">:get_customer_profile</span>, <span class="ruby-identifier">options</span>)
194:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">:get_customer_profile</span>, <span class="ruby-identifier">request</span>)
195:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000368" class="method-detail">
        <a name="M000368"></a>

        <div class="method-heading">
          <a href="#M000368" class="method-signature">
          <span class="method-name">get_customer_shipping_address</span><span class="method-args">(options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Retrieve a customer shipping address for an existing customer profile.
</p>
<p>
Returns a <a href="Response.html">Response</a> whose params hash contains
all the shipping address information.
</p>
<h4>Options</h4>
<ul>
<li><tt>:customer_profile_id</tt> &#8212; The Customer Profile ID of the
customer with the payment profile to be retrieved. (REQUIRED)

</li>
<li><tt>:customer_address_id</tt> &#8212; The Shipping Address ID of the
shipping address to be retrieved. (REQUIRED)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000368-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000368-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net_cim.rb, line 222</span>
222:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_customer_shipping_address</span>(<span class="ruby-identifier">options</span>)
223:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:customer_profile_id</span>)
224:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:customer_address_id</span>)
225: 
226:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_request</span>(<span class="ruby-identifier">:get_customer_shipping_address</span>, <span class="ruby-identifier">options</span>)
227:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">:get_customer_shipping_address</span>, <span class="ruby-identifier">request</span>)
228:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000370" class="method-detail">
        <a name="M000370"></a>

        <div class="method-heading">
          <a href="#M000370" class="method-signature">
          <span class="method-name">update_customer_payment_profile</span><span class="method-args">(options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Updates a customer payment profile for an existing customer profile.
</p>
<p>
Warning: if you do not provide a parameter in the <tt>:payment_profile</tt>
hash, it is automatically set to nil at Authorize.Net. You will most likely
want to first get the profile hash using <a
href="AuthorizeNetCimGateway.html#M000367">get_customer_payment_profile</a>
and then only change the elements you wish to change.
</p>
<h4>Options</h4>
<ul>
<li><tt>:customer_profile_id</tt> &#8212; The Customer Profile ID of the
customer with the payment profile to be updated. (REQUIRED)

</li>
<li><tt>:payment_profile</tt> &#8212; A hash containing the values the Customer
Payment Profile should be updated to. (REQUIRED)

</li>
</ul>
<h4>Payment Profile</h4>
<ul>
<li><tt>:customer_payment_profile_id</tt> &#8212; The Customer Payment Profile
ID of the Customer Payment Profile to update. (REQUIRED)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000370-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000370-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net_cim.rb, line 265</span>
265:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_customer_payment_profile</span>(<span class="ruby-identifier">options</span>)
266:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:customer_profile_id</span>, <span class="ruby-identifier">:payment_profile</span>)
267:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:payment_profile</span>], <span class="ruby-identifier">:customer_payment_profile_id</span>)
268: 
269:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_request</span>(<span class="ruby-identifier">:update_customer_payment_profile</span>, <span class="ruby-identifier">options</span>)
270:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">:update_customer_payment_profile</span>, <span class="ruby-identifier">request</span>)
271:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000369" class="method-detail">
        <a name="M000369"></a>

        <div class="method-heading">
          <a href="#M000369" class="method-signature">
          <span class="method-name">update_customer_profile</span><span class="method-args">(options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Updates an existing customer profile.
</p>
<p>
Warning: if you do not provide a parameter in the <tt>:payment_profile</tt>
hash, it is automatically set to nil at Authorize.Net. You will most likely
want to first get the profile hash using <a
href="AuthorizeNetCimGateway.html#M000366">get_customer_profile</a> and
then only change the elements you wish to change.
</p>
<h4>Options</h4>
<ul>
<li><tt>:profile</tt> &#8212; A hash containing the values the Customer Profile
should be updated to. (REQUIRED)

</li>
</ul>
<h4>Profile</h4>
<ul>
<li><tt>:customer_profile_id</tt> &#8212; The Customer Profile ID of the
customer profile to update. (REQUIRED)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000369-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000369-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net_cim.rb, line 243</span>
243:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_customer_profile</span>(<span class="ruby-identifier">options</span>)
244:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:profile</span>)
245:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:profile</span>], <span class="ruby-identifier">:customer_profile_id</span>)
246: 
247:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_request</span>(<span class="ruby-identifier">:update_customer_profile</span>, <span class="ruby-identifier">options</span>)
248:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">:update_customer_profile</span>, <span class="ruby-identifier">request</span>)
249:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000371" class="method-detail">
        <a name="M000371"></a>

        <div class="method-heading">
          <a href="#M000371" class="method-signature">
          <span class="method-name">update_customer_shipping_address</span><span class="method-args">(options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Updates a customer shipping address for an existing customer profile.
</p>
<p>
Warning: if you do not provide a parameter in the <tt>:address</tt> hash,
it is automatically set to nil at Authorize.Net. You will most likely want
to first get the profile hash using <a
href="AuthorizeNetCimGateway.html#M000368">get_customer_shipping_address</a>
and then only change the elements you wish to change.
</p>
<h4>Options</h4>
<ul>
<li><tt>:customer_profile_id</tt> &#8212; The Customer Profile ID of the
customer with the payment profile to be updated. (REQUIRED)

</li>
<li><tt>:address</tt> &#8212; A hash containing the values the Customer
Shipping Address should be updated to. (REQUIRED)

</li>
</ul>
<h4>Address</h4>
<ul>
<li><tt>:customer_address_id</tt> &#8212; The Customer Address ID of the
Customer Payment Profile to update. (REQUIRED)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000371-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000371-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net_cim.rb, line 287</span>
287:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_customer_shipping_address</span>(<span class="ruby-identifier">options</span>)
288:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:customer_profile_id</span>, <span class="ruby-identifier">:address</span>)
289:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:address</span>], <span class="ruby-identifier">:customer_address_id</span>)
290: 
291:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_request</span>(<span class="ruby-identifier">:update_customer_shipping_address</span>, <span class="ruby-identifier">options</span>)
292:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">:update_customer_shipping_address</span>, <span class="ruby-identifier">request</span>)
293:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000373" class="method-detail">
        <a name="M000373"></a>

        <div class="method-heading">
          <a href="#M000373" class="method-signature">
          <span class="method-name">validate_customer_payment_profile</span><span class="method-args">(options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Verifies an existing customer payment profile by generating a test
transaction
</p>
<p>
Returns a <a href="Response.html">Response</a> object that contains the
result of the transaction in <tt>params[&#8216;direct_response&#8217;]</tt>
</p>
<h4>Options</h4>
<ul>
<li><tt>:customer_profile_id</tt> &#8212; The Customer Profile ID of the
customer to use in this transaction. (REQUIRED)

</li>
<li><tt>:customer_payment_profile_id</tt> &#8212; The Customer Payment Profile
ID of the Customer Payment Profile to be verified. (REQUIRED)

</li>
<li><tt>:customer_address_id</tt> &#8212; The Customer Address ID of the
Customer Shipping Address to be verified.

</li>
<li><tt>:validation_mode</tt> &#8212; <tt>:live</tt> or <tt>:test</tt> In Test
Mode, only field validation is performed. In Live Mode, a transaction is
generated and submitted to the processor with the amount of $0.01. If
successful, the transaction is immediately voided. (REQUIRED)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000373-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000373-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net_cim.rb, line 330</span>
330:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">validate_customer_payment_profile</span>(<span class="ruby-identifier">options</span>)
331:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:customer_profile_id</span>, <span class="ruby-identifier">:customer_payment_profile_id</span>, <span class="ruby-identifier">:validation_mode</span>)
332: 
333:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_request</span>(<span class="ruby-identifier">:validate_customer_payment_profile</span>, <span class="ruby-identifier">options</span>)
334:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">:validate_customer_payment_profile</span>, <span class="ruby-identifier">request</span>)
335:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>