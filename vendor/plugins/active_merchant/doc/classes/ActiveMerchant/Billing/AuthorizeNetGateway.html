<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: ActiveMerchant::Billing::AuthorizeNetGateway</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">ActiveMerchant::Billing::AuthorizeNetGateway</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/active_merchant/billing/gateways/authorize_net_rb.html">
                lib/active_merchant/billing/gateways/authorize_net.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="Gateway.html">
                Gateway
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
For more information on the Authorize.Net <a
href="Gateway.html">Gateway</a> please visit their <a
href="http://developer.authorize.net/">Integration Center</a>
</p>
<p>
The login and password are not the username and password you use to login
to the Authorize.Net Merchant Interface. Instead, you will use the API
Login ID as the login and Transaction Key as the password.
</p>
<h4>How to Get Your API Login ID and Transaction Key</h4>
<ol>
<li>Log into the Merchant Interface

</li>
<li>Select Settings from the Main Menu

</li>
<li>Click on API Login ID and Transaction Key in the Security section

</li>
<li>Type in the answer to the secret question configured on setup

</li>
<li>Click Submit

</li>
</ol>
<h4>Automated Recurring Billing (ARB)</h4>
<p>
Automated Recurring Billing (ARB) is an optional service for submitting and
managing <a href="AuthorizeNetGateway.html#M000320">recurring</a>, or
subscription-based, transactions.
</p>
<p>
To use <a href="AuthorizeNetGateway.html#M000320">recurring</a>, <a
href="AuthorizeNetGateway.html#M000321">update_recurring</a>, and <a
href="AuthorizeNetGateway.html#M000322">cancel_recurring</a> ARB must be
enabled for your account.
</p>
<p>
Information about ARB is available on the <a
href="http://www.authorize.net/solutions/merchantsolutions/merchantservices/automatedrecurringbilling/">Authorize.Net
website</a>. Information about the ARB API is available at the <a
href="http://developer.authorize.net/">Authorize.Net Integration Center</a>
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000315">authorize</a>&nbsp;&nbsp;
      <a href="#M000322">cancel_recurring</a>&nbsp;&nbsp;
      <a href="#M000317">capture</a>&nbsp;&nbsp;
      <a href="#M000319">credit</a>&nbsp;&nbsp;
      <a href="#M000314">new</a>&nbsp;&nbsp;
      <a href="#M000316">purchase</a>&nbsp;&nbsp;
      <a href="#M000320">recurring</a>&nbsp;&nbsp;
      <a href="#M000321">update_recurring</a>&nbsp;&nbsp;
      <a href="#M000318">void</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">API_VERSION</td>
          <td>=</td>
          <td class="context-item-value">'3.1'</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">FRAUD_REVIEW</td>
          <td>=</td>
          <td class="context-item-value">1, 2, 3, 4</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">RESPONSE_REASON_TEXT</td>
          <td>=</td>
          <td class="context-item-value">0, 2, 3</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">CARD_CODE_RESPONSE_CODE</td>
          <td>=</td>
          <td class="context-item-value">5, 6, 38</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">CARD_CODE_ERRORS</td>
          <td>=</td>
          <td class="context-item-value">%w( N S )</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">AVS_ERRORS</td>
          <td>=</td>
          <td class="context-item-value">%w( A E N R W Z )</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">AUTHORIZE_NET_ARB_NAMESPACE</td>
          <td>=</td>
          <td class="context-item-value">'AnetApi/xml/v1/schema/AnetApiSchema.xsd'</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">RECURRING_ACTIONS</td>
          <td>=</td>
          <td class="context-item-value">{         :create =&gt; 'ARBCreateSubscription',         :update =&gt; 'ARBUpdateSubscription',         :cancel =&gt; 'ARBCancelSubscription'</td>
        </tr>
        </table>
      </div>
    </div>



      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000314" class="method-detail">
        <a name="M000314"></a>

        <div class="method-heading">
          <a href="#M000314" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a <a href="AuthorizeNetGateway.html#M000314">new</a> <a
href="AuthorizeNetGateway.html">AuthorizeNetGateway</a>
</p>
<p>
The gateway requires that a valid login and password be passed in the
<tt>options</tt> hash.
</p>
<h4>Options</h4>
<ul>
<li><tt>:login</tt> &#8212; The Authorize.Net API Login ID (REQUIRED)

</li>
<li><tt>:password</tt> &#8212; The Authorize.Net Transaction Key. (REQUIRED)

</li>
<li><tt>:test</tt> &#8212; <tt>true</tt> or <tt>false</tt>. If true, perform
transactions against the test server. Otherwise, perform transactions
against the production server.

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000314-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000314-source">
<pre>
    <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net.rb, line 69</span>
69:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">options</span> = {})
70:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:login</span>, <span class="ruby-identifier">:password</span>)
71:         <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">options</span>
72:         <span class="ruby-keyword kw">super</span>
73:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000315" class="method-detail">
        <a name="M000315"></a>

        <div class="method-heading">
          <a href="#M000315" class="method-signature">
          <span class="method-name">authorize</span><span class="method-args">(money, creditcard, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Performs an authorization, which reserves the funds on the customer&#8216;s
<a href="AuthorizeNetGateway.html#M000319">credit</a> card, but does not
charge the card.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>money</tt> &#8212; The amount to be authorized. Either an Integer value
in cents or a Money object.

</li>
<li><tt>creditcard</tt> &#8212; The <a href="CreditCard.html">CreditCard</a>
details for the transaction.

</li>
<li><tt>options</tt> &#8212; A hash of optional parameters.

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000315-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000315-source">
<pre>
    <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net.rb, line 83</span>
83:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">authorize</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span> = {})
84:         <span class="ruby-identifier">post</span> = {}
85:         <span class="ruby-identifier">add_invoice</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
86:         <span class="ruby-identifier">add_creditcard</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">creditcard</span>)
87:         <span class="ruby-identifier">add_address</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
88:         <span class="ruby-identifier">add_customer_data</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
89: 
90:         <span class="ruby-identifier">commit</span>(<span class="ruby-value str">'AUTH_ONLY'</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">post</span>)
91:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000322" class="method-detail">
        <a name="M000322"></a>

        <div class="method-heading">
          <a href="#M000322" class="method-signature">
          <span class="method-name">cancel_recurring</span><span class="method-args">(subscription_id)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Cancel a <a href="AuthorizeNetGateway.html#M000320">recurring</a> payment.
</p>
<p>
This transaction cancels an existing Automated Recurring Billing (ARB)
subscription. Your account must have ARB enabled and the subscription must
have already been created previously by calling <a
href="AuthorizeNetGateway.html#M000320">recurring</a>()
</p>
<h4>Parameters</h4>
<ul>
<li><tt>subscription_id</tt> &#8212; A string containing the
<tt>subscription_id</tt> of the <a
href="AuthorizeNetGateway.html#M000320">recurring</a> payment already in
place for a given <a href="AuthorizeNetGateway.html#M000319">credit</a>
card. (REQUIRED)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000322-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000322-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net.rb, line 221</span>
221:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cancel_recurring</span>(<span class="ruby-identifier">subscription_id</span>)
222:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_recurring_request</span>(<span class="ruby-identifier">:cancel</span>, <span class="ruby-identifier">:subscription_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">subscription_id</span>)
223:         <span class="ruby-identifier">recurring_commit</span>(<span class="ruby-identifier">:cancel</span>, <span class="ruby-identifier">request</span>)
224:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000317" class="method-detail">
        <a name="M000317"></a>

        <div class="method-heading">
          <a href="#M000317" class="method-signature">
          <span class="method-name">capture</span><span class="method-args">(money, authorization, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Captures the funds from an authorized transaction.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>money</tt> &#8212; The amount to be captured. Either an Integer value
in cents or a Money object.

</li>
<li><tt>authorization</tt> &#8212; The authorization returned from the previous
<a href="AuthorizeNetGateway.html#M000315">authorize</a> request.

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000317-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000317-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net.rb, line 116</span>
116:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">capture</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">authorization</span>, <span class="ruby-identifier">options</span> = {})
117:         <span class="ruby-identifier">post</span> = {<span class="ruby-identifier">:trans_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">authorization</span>}
118:         <span class="ruby-identifier">add_customer_data</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
119:         <span class="ruby-identifier">commit</span>(<span class="ruby-value str">'PRIOR_AUTH_CAPTURE'</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">post</span>)
120:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000319" class="method-detail">
        <a name="M000319"></a>

        <div class="method-heading">
          <a href="#M000319" class="method-signature">
          <span class="method-name">credit</span><span class="method-args">(money, identification, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Credit an account.
</p>
<p>
This transaction is also referred to as a Refund and indicates to the
gateway that money should flow from the merchant to the customer.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>money</tt> &#8212; The amount to be credited to the customer. Either an
Integer value in cents or a Money object.

</li>
<li><tt>identification</tt> &#8212; The ID of the original transaction against
which the <a href="AuthorizeNetGateway.html#M000319">credit</a> is being
issued.

</li>
<li><tt>options</tt> &#8212; A hash of parameters.

</li>
</ul>
<h4>Options</h4>
<ul>
<li><tt>:card_number</tt> &#8212; The <a
href="AuthorizeNetGateway.html#M000319">credit</a> card number the <a
href="AuthorizeNetGateway.html#M000319">credit</a> is being issued to.
(REQUIRED)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000319-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000319-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net.rb, line 146</span>
146:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">credit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">identification</span>, <span class="ruby-identifier">options</span> = {})
147:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:card_number</span>)
148: 
149:         <span class="ruby-identifier">post</span> = { <span class="ruby-identifier">:trans_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">identification</span>,
150:                  <span class="ruby-identifier">:card_num</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:card_number</span>]
151:                }
152:         <span class="ruby-identifier">add_invoice</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
153: 
154:         <span class="ruby-identifier">commit</span>(<span class="ruby-value str">'CREDIT'</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">post</span>)
155:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000316" class="method-detail">
        <a name="M000316"></a>

        <div class="method-heading">
          <a href="#M000316" class="method-signature">
          <span class="method-name">purchase</span><span class="method-args">(money, creditcard, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Perform a <a href="AuthorizeNetGateway.html#M000316">purchase</a>, which is
essentially an authorization and <a
href="AuthorizeNetGateway.html#M000317">capture</a> in a single operation.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>money</tt> &#8212; The amount to be purchased. Either an Integer value
in cents or a Money object.

</li>
<li><tt>creditcard</tt> &#8212; The <a href="CreditCard.html">CreditCard</a>
details for the transaction.

</li>
<li><tt>options</tt> &#8212; A hash of optional parameters.

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000316-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000316-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net.rb, line 100</span>
100:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">purchase</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span> = {})
101:         <span class="ruby-identifier">post</span> = {}
102:         <span class="ruby-identifier">add_invoice</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
103:         <span class="ruby-identifier">add_creditcard</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">creditcard</span>)
104:         <span class="ruby-identifier">add_address</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
105:         <span class="ruby-identifier">add_customer_data</span>(<span class="ruby-identifier">post</span>, <span class="ruby-identifier">options</span>)
106: 
107:         <span class="ruby-identifier">commit</span>(<span class="ruby-value str">'AUTH_CAPTURE'</span>, <span class="ruby-identifier">money</span>, <span class="ruby-identifier">post</span>)
108:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000320" class="method-detail">
        <a name="M000320"></a>

        <div class="method-heading">
          <a href="#M000320" class="method-signature">
          <span class="method-name">recurring</span><span class="method-args">(money, creditcard, options={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Create a <a href="AuthorizeNetGateway.html#M000320">recurring</a> payment.
</p>
<p>
This transaction creates a <a
href="AuthorizeNetGateway.html#M000314">new</a> Automated Recurring Billing
(ARB) subscription. Your account must have ARB enabled.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>money</tt> &#8212; The amount to be charged to the customer at each
interval. Either an Integer value in cents or a Money object.

</li>
<li><tt>creditcard</tt> &#8212; The <a href="CreditCard.html">CreditCard</a>
details for the transaction.

</li>
<li><tt>options</tt> &#8212; A hash of parameters.

</li>
</ul>
<h4>Options</h4>
<ul>
<li><tt>:interval</tt> &#8212; A hash containing information about the interval
of time between payments. Must contain the keys <tt>:length</tt> and
<tt>:unit</tt>. <tt>:unit</tt> can be either <tt>:months</tt> or
<tt>:days</tt>. If <tt>:unit</tt> is <tt>:months</tt> then
<tt>:interval</tt> must be an integer between 1 and 12 inclusive. If
<tt>:unit</tt> is <tt>:days</tt> then <tt>:interval</tt> must be an integer
between 7 and 365 inclusive. For example, to charge the customer once every
three months the hash would be +{ :unit =&gt; :months, :interval =&gt; 3 }+
(REQUIRED)

</li>
<li><tt>:duration</tt> &#8212; A hash containing keys for the
<tt>:start_date</tt> the subscription begins (also the date the initial
billing occurs) and the total number of billing <tt>:occurences</tt> or
payments for the subscription. (REQUIRED)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000320-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000320-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net.rb, line 178</span>
178:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">recurring</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>={})
179:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:interval</span>, <span class="ruby-identifier">:duration</span>, <span class="ruby-identifier">:billing_address</span>)
180:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:interval</span>], <span class="ruby-identifier">:length</span>, [<span class="ruby-identifier">:unit</span>, <span class="ruby-identifier">:days</span>, <span class="ruby-identifier">:months</span>])
181:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:duration</span>], <span class="ruby-identifier">:start_date</span>, <span class="ruby-identifier">:occurrences</span>)
182:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:billing_address</span>], <span class="ruby-identifier">:first_name</span>, <span class="ruby-identifier">:last_name</span>)
183: 
184:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:credit_card</span>] = <span class="ruby-identifier">creditcard</span>
185:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:amount</span>] = <span class="ruby-identifier">money</span>
186: 
187:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_recurring_request</span>(<span class="ruby-identifier">:create</span>, <span class="ruby-identifier">options</span>)
188:         <span class="ruby-identifier">recurring_commit</span>(<span class="ruby-identifier">:create</span>, <span class="ruby-identifier">request</span>)
189:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000321" class="method-detail">
        <a name="M000321"></a>

        <div class="method-heading">
          <a href="#M000321" class="method-signature">
          <span class="method-name">update_recurring</span><span class="method-args">(options={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Update a <a href="AuthorizeNetGateway.html#M000320">recurring</a>
payment&#8216;s details.
</p>
<p>
This transaction updates an existing Automated Recurring Billing (ARB)
subscription. Your account must have ARB enabled and the subscription must
have already been created previously by calling +<a
href="AuthorizeNetGateway.html#M000320">recurring</a>()+. The ability to
change certain details about a <a
href="AuthorizeNetGateway.html#M000320">recurring</a> payment is dependent
on transaction history and cannot be determined until after calling +<a
href="AuthorizeNetGateway.html#M000321">update_recurring</a>()+. See the
ARB XML Guide for such conditions.
</p>
<h4>Parameters</h4>
<ul>
<li><tt>options</tt> &#8212; A hash of parameters.

</li>
</ul>
<h4>Options</h4>
<ul>
<li><tt>:subscription_id</tt> &#8212; A string containing the
<tt>:subscription_id</tt> of the <a
href="AuthorizeNetGateway.html#M000320">recurring</a> payment already in
place for a given <a href="AuthorizeNetGateway.html#M000319">credit</a>
card. (REQUIRED)

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000321-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000321-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net.rb, line 206</span>
206:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_recurring</span>(<span class="ruby-identifier">options</span>={})
207:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:subscription_id</span>)
208:         <span class="ruby-identifier">request</span> = <span class="ruby-identifier">build_recurring_request</span>(<span class="ruby-identifier">:update</span>, <span class="ruby-identifier">options</span>)
209:         <span class="ruby-identifier">recurring_commit</span>(<span class="ruby-identifier">:update</span>, <span class="ruby-identifier">request</span>)
210:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000318" class="method-detail">
        <a name="M000318"></a>

        <div class="method-heading">
          <a href="#M000318" class="method-signature">
          <span class="method-name">void</span><span class="method-args">(authorization, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Void a previous transaction
</p>
<h4>Parameters</h4>
<ul>
<li><tt>authorization</tt> - The authorization returned from the previous <a
href="AuthorizeNetGateway.html#M000315">authorize</a> request.

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000318-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000318-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/authorize_net.rb, line 127</span>
127:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">void</span>(<span class="ruby-identifier">authorization</span>, <span class="ruby-identifier">options</span> = {})
128:         <span class="ruby-identifier">post</span> = {<span class="ruby-identifier">:trans_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">authorization</span>}
129:         <span class="ruby-identifier">commit</span>(<span class="ruby-value str">'VOID'</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">post</span>)
130:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>