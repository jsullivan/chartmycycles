<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: ActiveMerchant::Billing::LinkpointGateway</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">ActiveMerchant::Billing::LinkpointGateway</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/active_merchant/billing/gateways/linkpoint_rb.html">
                lib/active_merchant/billing/gateways/linkpoint.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="Gateway.html">
                Gateway
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Initialization Options :login Your store number :pem The text of your
linkpoint PEM file. Note
</p>
<pre>
                      this is not the path to file, but its
                      contents. If you are only using one PEM
                      file on your site you can declare it
                      globally and then you won't need to
                      include this option
</pre>
<p>
A valid store number is required. Unfortunately, with LinkPoint YOU
CAN&#8216;T JUST USE ANY OLD STORE NUMBER. Also, you can&#8216;t just
generate your own PEM file. You&#8216;ll need to use a special PEM file
provided by LinkPoint.
</p>
<p>
Go to <a
href="http://www.linkpoint.com/support/sup_teststore.asp">www.linkpoint.com/support/sup_teststore.asp</a>
to set up a test account and obtain your PEM file.
</p>
<p>
Declaring PEM file Globally
ActiveMerchant::Billing::LinkpointGateway.pem_file = File.read(
File.dirname(<em>FILE</em>) + &#8217;/../mycert.pem&#8217; )
</p>
<p>
Valid Order Options :result =&gt;
</p>
<pre>
  LIVE                  Production mode
  GOOD                  Approved response in test mode
  DECLINE               Declined response in test mode
  DUPLICATE             Duplicate response in test mode
</pre>
<p>
:ponumber Order number
</p>
<p>
:transactionorigin =&gt; Source of the transaction
</p>
<pre>
   ECI                  Email or Internet
   MAIL                 Mail order
   MOTO                 Mail order/Telephone
   TELEPHONE            Telephone
   RETAIL               Face-to-face
</pre>
<p>
:ordertype =&gt;
</p>
<pre>
   SALE                 Real live sale
   PREAUTH              Authorize only
   POSTAUTH             Forced Ticket or Ticket Only transaction
   VOID
   CREDIT
   CALCSHIPPING         For shipping charges calculations
   CALCTAX              For sales tax calculations
</pre>
<p>
Recurring Options :action =&gt;
</p>
<pre>
   SUBMIT
   MODIFY
   CANCEL
</pre>
<p>
:installments Identifies how many <a
href="LinkpointGateway.html#M000390">recurring</a> payments to charge the
customer :startdate Date to begin charging the <a
href="LinkpointGateway.html#M000390">recurring</a> payments. Format:
YYYYMMDD or &quot;immediate&quot; :periodicity =&gt;
</p>
<pre>
    MONTHLY
    BIMONTHLY
    WEEKLY
    BIWEEKLY
    YEARLY
    DAILY
</pre>
<p>
:threshold Tells how many times to retry the transaction (if it fails)
before contacting the merchant. :comments Uh&#8230; comments
</p>
<p>
For reference:
</p>
<p>
<a
href="https://www.linkpointcentral.com/lpc/docs/Help/APIHelp/lpintguide.htm">www.linkpointcentral.com/lpc/docs/Help/APIHelp/lpintguide.htm</a>
</p>
<pre>
 Entities = {
   :payment =&gt; [:subtotal, :tax, :vattax, :shipping, :chargetotal],
   :billing =&gt; [:name, :address1, :address2, :city, :state, :zip, :country, :email, :phone, :fax, :addrnum],
   :shipping =&gt; [:name, :address1, :address2, :city, :state, :zip, :country, :weight, :items, :carrier, :total],
   :creditcard =&gt; [:cardnumber, :cardexpmonth, :cardexpyear, :cvmvalue, :track],
   :telecheck =&gt; [:routing, :account, :checknumber, :bankname, :bankstate, :dl, :dlstate, :void, :accounttype, :ssn],
   :transactiondetails =&gt; [:transactionorigin, :oid, :ponumber, :taxexempt, :terminaltype, :ip, :reference_number, :recurring, :tdate],
   :periodic =&gt; [:action, :installments, :threshold, :startdate, :periodicity, :comments],
   :notes =&gt; [:comments, :referred]
 }
</pre>
<p>
IMPORTANT NOTICE:
</p>
<p>
LinkPoint&#8216;s Items entity is not yet supported in this module.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000392">authorize</a>&nbsp;&nbsp;
      <a href="#M000393">capture</a>&nbsp;&nbsp;
      <a href="#M000395">credit</a>&nbsp;&nbsp;
      <a href="#M000389">new</a>&nbsp;&nbsp;
      <a href="#M000391">purchase</a>&nbsp;&nbsp;
      <a href="#M000390">recurring</a>&nbsp;&nbsp;
      <a href="#M000396">test?</a>&nbsp;&nbsp;
      <a href="#M000394">void</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">TEST_URL</td>
          <td>=</td>
          <td class="context-item-value">'https://staging.linkpt.net:1129/'</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">LIVE_URL</td>
          <td>=</td>
          <td class="context-item-value">'https://secure.linkpt.net:1129/'</td>
        </tr>
        </table>
      </div>
    </div>



      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000389" class="method-detail">
        <a name="M000389"></a>

        <div class="method-heading">
          <a href="#M000389" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000389-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000389-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/linkpoint.rb, line 112</span>
112:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">options</span> = {})
113:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:login</span>)
114:         
115:         <span class="ruby-ivar">@options</span> = {
116:           <span class="ruby-identifier">:result</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'LIVE'</span>,
117:           <span class="ruby-identifier">:pem</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">LinkpointGateway</span>.<span class="ruby-identifier">pem_file</span>
118:         }.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">options</span>)
119:         
120:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;You need to pass in your pem file using the :pem parameter or set it globally using ActiveMerchant::Billing::LinkpointGateway.pem_file = File.read( File.dirname(__FILE__) + '/../mycert.pem' ) or similar&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:pem</span>].<span class="ruby-identifier">blank?</span>
121:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000392" class="method-detail">
        <a name="M000392"></a>

        <div class="method-heading">
          <a href="#M000392" class="method-signature">
          <span class="method-name">authorize</span><span class="method-args">(money, creditcard, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Authorize the transaction
</p>
<p>
Reserves the funds on the customer&#8216;s <a
href="LinkpointGateway.html#M000395">credit</a> card, but does not charge
the card.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000392-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000392-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/linkpoint.rb, line 171</span>
171:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">authorize</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span> = {})
172:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:order_id</span>)
173:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">update</span>(
174:           <span class="ruby-identifier">:ordertype</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;PREAUTH&quot;</span>
175:         )
176:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>)
177:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000393" class="method-detail">
        <a name="M000393"></a>

        <div class="method-heading">
          <a href="#M000393" class="method-signature">
          <span class="method-name">capture</span><span class="method-args">(money, authorization, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Post an authorization.
</p>
<p>
Captures the funds from an authorized transaction. Order_id must be a valid
order id from a prior authorized transaction.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000393-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000393-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/linkpoint.rb, line 185</span>
185:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">capture</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">authorization</span>, <span class="ruby-identifier">options</span> = {})
186:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">update</span>(
187:           <span class="ruby-identifier">:order_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">authorization</span>,
188:           <span class="ruby-identifier">:ordertype</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;POSTAUTH&quot;</span>
189:         )
190:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">options</span>)  
191:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000395" class="method-detail">
        <a name="M000395"></a>

        <div class="method-heading">
          <a href="#M000395" class="method-signature">
          <span class="method-name">credit</span><span class="method-args">(money, identification, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Refund an order
</p>
<p>
identification must be a valid order id previously submitted by SALE
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000395-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000395-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/linkpoint.rb, line 207</span>
207:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">credit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">identification</span>, <span class="ruby-identifier">options</span> = {})
208:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">update</span>(
209:           <span class="ruby-identifier">:ordertype</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;CREDIT&quot;</span>,
210:           <span class="ruby-identifier">:order_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">identification</span>
211:         )
212:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">options</span>)
213:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000391" class="method-detail">
        <a name="M000391"></a>

        <div class="method-heading">
          <a href="#M000391" class="method-signature">
          <span class="method-name">purchase</span><span class="method-args">(money, creditcard, options={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Buy the thing
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000391-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000391-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/linkpoint.rb, line 158</span>
158:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">purchase</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>={})
159:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">:order_id</span>)
160:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">update</span>(
161:           <span class="ruby-identifier">:ordertype</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;SALE&quot;</span>
162:         )
163:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>)
164:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000390" class="method-detail">
        <a name="M000390"></a>

        <div class="method-heading">
          <a href="#M000390" class="method-signature">
          <span class="method-name">recurring</span><span class="method-args">(money, creditcard, options={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Send a <a href="LinkpointGateway.html#M000391">purchase</a> request with
periodic options Recurring Options :action =&gt;
</p>
<pre>
   SUBMIT
   MODIFY
   CANCEL
</pre>
<p>
:installments Identifies how many <a
href="LinkpointGateway.html#M000390">recurring</a> payments to charge the
customer :startdate Date to begin charging the <a
href="LinkpointGateway.html#M000390">recurring</a> payments. Format:
YYYYMMDD or &quot;immediate&quot; :periodicity =&gt;
</p>
<pre>
    :monthly
    :bimonthly
    :weekly
    :biweekly
    :yearly
    :daily
</pre>
<p>
:threshold Tells how many times to retry the transaction (if it fails)
before contacting the merchant. :comments Uh&#8230; comments
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000390-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000390-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/linkpoint.rb, line 142</span>
142:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">recurring</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>={})
143:         <span class="ruby-identifier">requires!</span>(<span class="ruby-identifier">options</span>, [<span class="ruby-identifier">:periodicity</span>, <span class="ruby-identifier">:bimonthly</span>, <span class="ruby-identifier">:monthly</span>, <span class="ruby-identifier">:biweekly</span>, <span class="ruby-identifier">:weekly</span>, <span class="ruby-identifier">:yearly</span>, <span class="ruby-identifier">:daily</span>], <span class="ruby-identifier">:installments</span>, <span class="ruby-identifier">:order_id</span> )
144:         
145:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">update</span>(
146:           <span class="ruby-identifier">:ordertype</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;SALE&quot;</span>,
147:           <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:action</span>] <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;SUBMIT&quot;</span>,
148:           <span class="ruby-identifier">:installments</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:installments</span>] <span class="ruby-operator">||</span> <span class="ruby-value">12</span>,
149:           <span class="ruby-identifier">:startdate</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:startdate</span>] <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;immediate&quot;</span>,
150:           <span class="ruby-identifier">:periodicity</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:periodicity</span>].<span class="ruby-identifier">to_s</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;monthly&quot;</span>,
151:           <span class="ruby-identifier">:comments</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:comments</span>] <span class="ruby-operator">||</span> <span class="ruby-keyword kw">nil</span>,
152:           <span class="ruby-identifier">:threshold</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:threshold</span>] <span class="ruby-operator">||</span> <span class="ruby-value">3</span>
153:         )
154:         <span class="ruby-identifier">commit</span>(<span class="ruby-identifier">money</span>, <span class="ruby-identifier">creditcard</span>, <span class="ruby-identifier">options</span>)
155:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000396" class="method-detail">
        <a name="M000396"></a>

        <div class="method-heading">
          <a href="#M000396" class="method-signature">
          <span class="method-name">test?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000396-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000396-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/linkpoint.rb, line 215</span>
215:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test?</span>
216:         <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:test</span>] <span class="ruby-operator">||</span> <span class="ruby-keyword kw">super</span>
217:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000394" class="method-detail">
        <a name="M000394"></a>

        <div class="method-heading">
          <a href="#M000394" class="method-signature">
          <span class="method-name">void</span><span class="method-args">(identification, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Void a previous transaction
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000394-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000394-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_merchant/billing/gateways/linkpoint.rb, line 194</span>
194:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">void</span>(<span class="ruby-identifier">identification</span>, <span class="ruby-identifier">options</span> = {})
195:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">update</span>(
196:           <span class="ruby-identifier">:order_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">identification</span>,
197:           <span class="ruby-identifier">:ordertype</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;VOID&quot;</span>
198:         )
199:         <span class="ruby-identifier">commit</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">options</span>)
200:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>